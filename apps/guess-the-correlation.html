---
layout: page
title: Guess the Correlation Game
css: "/css/main.css"
---

<div id="input"> 
            <form name="inputForm" id="inputForm" action="#" style="min-height: 250px;border-bottom: 1px solid;padding: 22px;"> 
                <center>
                    <button onclick="inputSubmit()" id="submitButton">New Challenge</button><br/>
                    -1<input id="slider" type ="range" min ="-1" max="1" step ="0.01" value="0" onchange="printValue('slider','rangeValue2')" style="width: 167px;"/>1<br/>
                    <input id="rangeValue2" type="text" size="2" value="0" style="height: 29px; text-align: center; font-size: larger;  font-family: monospace;width: 67px;"/><br/>
                    <button onclick="showAnswer()" id="submitButton1">Answer Please</button>
                    <div id="answer"></div>
                </center>
            </form>
			
			<b>Development Challenge:</b><br/>
			<i>How to generate data points with given correlation "r"?</i><br/>
			Generate two sequences of uncorrelated normal distributed random numbers $X_1, X_2$<br/>
			Define a new sequence $$Y_1 = \rho X_1 + \sqrt{1-\rho^2} X_2$$
			This new $Y_1$ sequence will have a correlation of $\rho$ with the $X_1$ sequence.<br/>
        </div>

        <div id="output">
            <center style="
    padding: 15px;
    color: #6d6d6d;
    font-family: 'Raleway',Helvetica,Arial;
    font-size: 24px;
    border-bottom: 1px solid #dcdcdc;
    text-align: center;
    display: block;
">Scatter Plot</center>
            <div id="debug"></div>
            <!--Div that will hold the pie chart-->
            <div id="chart_div"></div>
			<div id="equation"></html>
        </div>

    </div>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script>
    //creating chart
	$("#submitButton1").hide();
    google.load("visualization", "1", {
        packages: ["corechart"]
    });
    //google.setOnLoadCallback(drawChart);

    function drawChart(data, option) {
        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
        chart.draw(data, options);
    }

    function inputSubmit() { 
    	$("#slider").val(0);
    	$("#rangeValue2").val(0);
    	$("#submitButton1").hide();
    	document.getElementById("answer").innerHTML = "";
	// get a random correlation to use 
	Number(((Math.random() * 100) + 1))
	r = Number(Math.random().toFixed(2)); // this will get a number between 0 and 1;
	r *= Math.floor(Math.random()*2) == 1 ? 1 : -1; // this will add minus sign in 50% of cases
	var x = new Array(), y = new Array();
	//generate 2 vectors with given correlation r
	for (var i=0; i<20; i++) {
		x.push(Number(Math.random().toFixed(2))); 
		y.push(Number((x[i]*r + Math.sqrt(1-r*r)*Math.random()).toFixed(2)));
	} 
        xVector = x;
        yVector = y; 
        /*
		var debugWindow = document.getElementById("debug");
		debugWindow.innerHTML = xVector;
		debugWindow.innerHTML += "<br/>" +yVector+"<br/>";
		*/

        var data = new google.visualization.DataTable();
        data.addColumn('number', 'X');
        data.addColumn('number', 'Y');

        for (a in xVector) {
            data.addRow([xVector[a], yVector[a]]);
        }

        options = {
            title: "X vs Y correlation",
            hAxis: {
                title: "X",
                minValue: 0,
                maxValue: 1
            },
            vAxis: {
                title: "Y",
                minValue: -1,
                maxValue: 1
            },
            'width':800,
            'height':400,
            legend: 'none'//,
            //trendlines: { 0: {} }    // Draw a trendline for data series 0.
        };

        drawChart(data, options);
	$("#submitButton1").delay(2000).fadeIn();
    }
</script>
